(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{267:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(1),i=n(9),r=(n(0),n(483)),o=n(581),s={id:"configuring-links",title:"Configuring links",sidebar_label:"Configuring links"},c={id:"version-5.x/configuring-links",title:"Configuring links",description:"In this guide, we will configure React Navigation to handle external links. This is necessary if you want to:",source:"@site/versioned_docs/version-5.x/configuring-links.md",permalink:"/docs/configuring-links",editUrl:"https://github.com/react-navigation/react-navigation.github.io/edit/source/versioned_docs/version-5.x/configuring-links.md",version:"5.x",sidebar_label:"Configuring links",sidebar:"version-5.x/docs",previous:{title:"Deep linking",permalink:"/docs/deep-linking"},next:{title:"React Navigation on the Web",permalink:"/docs/web-support"}},l=[{value:"Mapping path to route names",id:"mapping-path-to-route-names",children:[]},{value:"Passing params",id:"passing-params",children:[]},{value:"Handling nested navigators",id:"handling-nested-navigators",children:[]},{value:"Rendering an initial route",id:"rendering-an-initial-route",children:[]},{value:"Matching exact paths",id:"matching-exact-paths",children:[]},{value:"Omitting a screen from path",id:"omitting-a-screen-from-path",children:[]},{value:"Serializing and parsing params",id:"serializing-and-parsing-params",children:[]},{value:"Advanced cases",id:"advanced-cases",children:[]},{value:"Constraints to consider with nesting configs",id:"constraints-to-consider-with-nesting-configs",children:[]},{value:"Playground",id:"playground",children:[]},{value:"Example App",id:"example-app",children:[{value:"Making the config more flexible",id:"making-the-config-more-flexible",children:[]}]}],p={rightToc:l};function b(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"In this guide, we will configure React Navigation to handle external links. This is necessary if you want to:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Handle deep links in React Native apps on Android and iOS"),Object(r.b)("li",{parentName:"ol"},"Enable URL integration in browser when using on web"),Object(r.b)("li",{parentName:"ol"},"Use ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/link"}),Object(r.b)("inlineCode",{parentName:"a"},"<Link />"))," or ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/use-link-to"}),Object(r.b)("inlineCode",{parentName:"a"},"useLinkTo"))," to navigate using paths.")),Object(r.b)("p",null,"To handle a link, you need to translate it to a valid navigation state and vice versa. For example, the path ",Object(r.b)("inlineCode",{parentName:"p"},"/rooms/chat?user=jane")," may be translated to a state object like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  routes: [\n    {\n      name: 'rooms',\n      state: {\n        routes: [\n          {\n            name: 'chat',\n            params: { user: 'jane' },\n          },\n        ],\n      },\n    },\n  ],\n}\n")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"NavigationContainer")," accepts a ",Object(r.b)("inlineCode",{parentName:"p"},"linking")," prop that makes it easier to handle incoming links:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { NavigationContainer } from '@react-navigation/native';\n\nconst linking = {\n  prefixes: ['https://mychat.com', 'mychat://'],\n};\n\nfunction App() {\n  return (\n    <NavigationContainer linking={linking} fallback={<Text>Loading...</Text>}>\n      {/* content */}\n    </NavigationContainer>\n  );\n}\n")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"prefixes")," option is needed to match the incoming deep links and strip the prefix before React Navigation parses them. It's not needed for web integration."),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"fallback")," prop controls what's displayed when React Navigation is trying to resolve the initial deep link URL."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: Deep link integration uses React Native's ",Object(r.b)("inlineCode",{parentName:"p"},"Linking.getInitialUrl()")," under the hood. Currently there seems to be bug (",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/facebook/react-native/issues/25675"}),"facebook/react-native#25675"),") which results in it never resolving on Android. We add a timeout to avoid getting stuck forever, but it means that the link might not be handled in some cases.")),Object(r.b)("h2",{id:"mapping-path-to-route-names"},"Mapping path to route names"),Object(r.b)("p",null,"By default, React Navigation will use the path segments as the route name when parsing the URL. But directly translating path segments to route names may not be the expected behavior, and your."),Object(r.b)("p",null,"For example, you might want to parse the path ",Object(r.b)("inlineCode",{parentName:"p"},"/feed/latest")," to something like:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  routes: [\n    {\n      name: 'Chat',\n      params: {\n        sort: 'latest',\n      },\n    },\n  ];\n}\n")),Object(r.b)("p",null,"You can specify a separate ",Object(r.b)("inlineCode",{parentName:"p"},"config")," option to control how the deep link is parsed to suit your needs."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const linking = {\n  prefixes: ['https://mychat.com', 'mychat://'],\n  config: {\n    Chat: 'feed/:sort',\n    Profile: 'user',\n  },\n};\n")),Object(r.b)("p",null,"Here ",Object(r.b)("inlineCode",{parentName:"p"},"Chat")," is the name of the screen that handles the URL ",Object(r.b)("inlineCode",{parentName:"p"},"/feed"),", and ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," handles the URL ",Object(r.b)("inlineCode",{parentName:"p"},"/user"),"."),Object(r.b)("h2",{id:"passing-params"},"Passing params"),Object(r.b)("p",null,"A common use case is to pass params to a screen to pass some data. For example, you may want the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen to have an ",Object(r.b)("inlineCode",{parentName:"p"},"id")," param to know which user's profile it is. It's possible to pass params to a screen through a URL when handling deep links."),Object(r.b)("p",null,"By default, query params are used to specify params for a screen. For example, with the above example, the URL ",Object(r.b)("inlineCode",{parentName:"p"},"/user?id=wojciech")," will pass the ",Object(r.b)("inlineCode",{parentName:"p"},"id")," param to the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen."),Object(r.b)("p",null,"You can also customize how the params are parsed from the URL. Let's say you want the URL to look like ",Object(r.b)("inlineCode",{parentName:"p"},"/user/wojciech")," where the ",Object(r.b)("inlineCode",{parentName:"p"},"id")," param is ",Object(r.b)("inlineCode",{parentName:"p"},"wojciech")," instead of having the ",Object(r.b)("inlineCode",{parentName:"p"},"id")," in query params. You can do this by specifying ",Object(r.b)("inlineCode",{parentName:"p"},"user/:id")," for the ",Object(r.b)("inlineCode",{parentName:"p"},"path"),". ",Object(r.b)("strong",{parentName:"p"},"When the path segment starts with ",Object(r.b)("inlineCode",{parentName:"strong"},":"),", it'll be treated as a param"),". For example, the URL ",Object(r.b)("inlineCode",{parentName:"p"},"/user/wojciech")," would resolve to ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen with the string ",Object(r.b)("inlineCode",{parentName:"p"},"wojciech")," as a value of the ",Object(r.b)("inlineCode",{parentName:"p"},"id")," param and will be available in ",Object(r.b)("inlineCode",{parentName:"p"},"route.params.id")," in ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen."),Object(r.b)("p",null,"By default, all params are treated as strings. You can also customize how to parse them by specifying a function in the ",Object(r.b)("inlineCode",{parentName:"p"},"parse")," property to parse the param, and a function in the ",Object(r.b)("inlineCode",{parentName:"p"},"stringify")," property to convert it back to a string."),Object(r.b)("p",null,"If you wanted to resolve ",Object(r.b)("inlineCode",{parentName:"p"},"/user/wojciech/22")," to result in the params ",Object(r.b)("inlineCode",{parentName:"p"},"{ id: 'user-wojciech' age: 22 }"),", you could make ",Object(r.b)("inlineCode",{parentName:"p"},"Profile"),"'s config to look like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Profile: {\n    path: 'user/:id/:age',\n    parse: {\n      id: id => `user-${id}`,\n      age: Number,\n    },\n    stringify: {\n      id: id => id.replace(/^user-/, '')\n    }\n  }\n}\n")),Object(r.b)("p",null,"This will result in something like:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  routes: [\n    {\n      name: 'Profile',\n      params: { id: 'user-wojciech', age: 22 },\n    },\n  ],\n};\n")),Object(r.b)("h2",{id:"handling-nested-navigators"},"Handling nested navigators"),Object(r.b)("p",null,"Sometimes you'll have the target navigator nested in other navigators which aren't part of the deep link. For example, let's say your navigation structure looks like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'function Home() {\n  return (\n    <Tab.Navigator>\n      <Tab.Screen name="Profile" component={Profile} />\n      <Tab.Screen name="Feed" component={Feed} />\n    </Tab.Navigator>\n  );\n}\n\nfunction App() {\n  return (\n    <Stack.Navigator>\n      <Stack.Screen name="Home" component={Home} />\n      <Stack.Screen name="Settings" component={Settings} />\n    </Stack.Navigator>\n  );\n}\n')),Object(r.b)("p",null,"Here you have a stack navigator in the root, and inside the ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen of the root stack, you have a tab navigator with various screens. With this structure, let's say you want the path ",Object(r.b)("inlineCode",{parentName:"p"},"/users/:id")," to go to the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen. You can express the nested config like so:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Home: {\n    screens: {\n      Profile: 'users/:id',\n    },\n  },\n}\n")),Object(r.b)("p",null,"In this config, you specify that the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen should be resolved for the ",Object(r.b)("inlineCode",{parentName:"p"},"users/:id")," pattern and it's nested inside the ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen. Then parsing ",Object(r.b)("inlineCode",{parentName:"p"},"users/jane")," will result in the following state object:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  routes: [\n    {\n      name: 'Home',\n      state: {\n        routes: [\n          {\n            name: 'Profile',\n            params: { id: 'jane' },\n          },\n        ],\n      },\n    },\n  ],\n};\n")),Object(r.b)("p",null,"It's important to note that the state object must match the hierarchy of nested navigators. Otherwise the state will be discarded."),Object(r.b)("h2",{id:"rendering-an-initial-route"},"Rendering an initial route"),Object(r.b)("p",null,"Sometimes you want to ensure that a certain screen will always be present as the first screen in the navigator's state. You can use the ",Object(r.b)("inlineCode",{parentName:"p"},"initialRouteName")," property to specify the screen to use for the initial screen."),Object(r.b)("p",null,"In the above example, if you want the ",Object(r.b)("inlineCode",{parentName:"p"},"Feed")," screen to be the initial route in the navigator under ",Object(r.b)("inlineCode",{parentName:"p"},"Home"),", your config will look like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Home: {\n    initialRouteName: 'Feed',\n    screens: {\n      Profile: 'users/:id',\n      Settings: 'settings',\n    },\n  },\n};\n")),Object(r.b)("p",null,"Then, the path ",Object(r.b)("inlineCode",{parentName:"p"},"/users/42")," will resolve to the following state object:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  routes: [\n    {\n      name: 'Home',\n      state: {\n        index: 1,\n        routes: [\n          { name: 'Feed' },\n          {\n            name: 'Profile',\n            params: { id: 'jane' },\n          },\n        ],\n      },\n    },\n  ],\n};\n")),Object(r.b)("p",null,"Note that in this case, any params in the URL are only passed to the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen which matches the path pattern ",Object(r.b)("inlineCode",{parentName:"p"},"users/:id"),", and the ",Object(r.b)("inlineCode",{parentName:"p"},"Feed")," screen doesn't receive any params. If you want to have the same params in the ",Object(r.b)("inlineCode",{parentName:"p"},"Feed")," screen, you can specify a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/use-linking#getstatefrompath"}),"custom ",Object(r.b)("inlineCode",{parentName:"a"},"getStateFromPath")," function")," and copy those params."),Object(r.b)("h2",{id:"matching-exact-paths"},"Matching exact paths"),Object(r.b)("p",null,"By default, paths defined for each screen are matched against the URL relative to their parent screen's path. Consider the following config:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Home: {\n    path: 'feed',\n    screens: {\n      Profile: 'users/:id',\n    },\n  },\n}\n")),Object(r.b)("p",null,"Here, you have a ",Object(r.b)("inlineCode",{parentName:"p"},"path")," property defined for the ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen, as well as the child ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen. The profile screen specifies the path ",Object(r.b)("inlineCode",{parentName:"p"},"users/:id"),", but since it's nested inside a screen with the path ",Object(r.b)("inlineCode",{parentName:"p"},"feed"),", it'll try to match the pattern ",Object(r.b)("inlineCode",{parentName:"p"},"feed/users/:id"),"."),Object(r.b)("p",null,"This will result in the URL ",Object(r.b)("inlineCode",{parentName:"p"},"/feed")," navigating to ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen, and ",Object(r.b)("inlineCode",{parentName:"p"},"/feed/users/cal")," navigating to the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen."),Object(r.b)("p",null,"In this case, it makes more sense to navigate to the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen using a URL like ",Object(r.b)("inlineCode",{parentName:"p"},"/users/cal"),", rather than ",Object(r.b)("inlineCode",{parentName:"p"},"/feed/users/cal"),". To achieve this, you can override the relative matching behavior to ",Object(r.b)("inlineCode",{parentName:"p"},"exact")," matching:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Home: {\n    path: 'feed',\n    screens: {\n      Profile: {\n        path: 'users/:id',\n        exact: true,\n      },\n    },\n  },\n}\n")),Object(r.b)("p",null,"With ",Object(r.b)("inlineCode",{parentName:"p"},"exact")," property set to ",Object(r.b)("inlineCode",{parentName:"p"},"true"),", ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," will ignore the parent screen's ",Object(r.b)("inlineCode",{parentName:"p"},"path")," config and you'll be able to navigate to ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," using a URL like ",Object(r.b)("inlineCode",{parentName:"p"},"users/cal"),"."),Object(r.b)("h2",{id:"omitting-a-screen-from-path"},"Omitting a screen from path"),Object(r.b)("p",null,"Sometimes, you may not want to have the route name of a screen in the path. For example, let's say you have a ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen and our navigation state looks like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const state = {\n  routes: [{ name: 'Home' }],\n};\n")),Object(r.b)("p",null,"When this state is serialized to a path with the following config, you'll get ",Object(r.b)("inlineCode",{parentName:"p"},"/Home"),":"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Home: {\n    screens: {\n      Profile: 'users/:id',\n    },\n  },\n}\n")),Object(r.b)("p",null,"But it'll be nicer if the URL was just ",Object(r.b)("inlineCode",{parentName:"p"},"/")," when visiting the home screen. You can specify an empty string as path and React Navigation won't add the screen to the path (think of it like adding empty string to the path, which doesn't change anything):"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Home: {\n    path: '',\n    screens: {\n      Profile: 'users/:id',\n    },\n  },\n}\n")),Object(r.b)("h2",{id:"serializing-and-parsing-params"},"Serializing and parsing params"),Object(r.b)("p",null,"Since URLs are strings, any params you have for routes are also converted to strings when constructing the path."),Object(r.b)("p",null,"For example, say you have a state like following:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  routes: [\n    {\n      name: 'Chat',\n      params: { at: 1589842744264 },\n    },\n  ];\n}\n")),Object(r.b)("p",null,"It'll be converted to ",Object(r.b)("inlineCode",{parentName:"p"},"chat/1589842744264")," with the following config:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Chat: 'chat/:date';\n}\n")),Object(r.b)("p",null,"When parsing this path, you'll get the following state:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  routes: [\n    {\n      name: 'Chat',\n      params: { date: '1589842744264' },\n    },\n  ];\n}\n")),Object(r.b)("p",null,"Here, the ",Object(r.b)("inlineCode",{parentName:"p"},"date")," param was parsed as a string because React Navigation doesn't know that it's supposed to be a timestamp, and hence number. You can customize it by providing a custom function to use for parsing:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"{\n  Chat: {\n    path: 'chat/:date',\n    parse: {\n      date: Number,\n    },\n  }\n}\n")),Object(r.b)("p",null,"You can also provide a custom function to serialize the params. For example, let's say that you want to use a DD-MM-YYYY format in the path instead of a timestamp:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'{\n  Chat: {\n    path: \'chat/:date\',\n    parse: {\n      date: date => new Date(date).getTime(),\n    },\n    stringify: {\n      date: date => {\n        const d = new Date(date);\n\n        return d.getFullYear() + "-" + d.getMonth() + "-" + d.getDate();\n      },\n    },\n  }\n}\n')),Object(r.b)("p",null,"Depending on your requirements, you can use this functionality to parse and stringify more complex data."),Object(r.b)("h2",{id:"advanced-cases"},"Advanced cases"),Object(r.b)("p",null,"For some advanced cases, specifying the mapping may not be sufficient. To handle such cases, you can specify a custom function to parse the URL into a state object (",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/use-linking#getstatefrompath"}),Object(r.b)("inlineCode",{parentName:"a"},"getStateFromPath")),"), and a custom function to serialize the state object into an URL (",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/use-linking#getpathfromstate"}),Object(r.b)("inlineCode",{parentName:"a"},"getPathFromState")),")."),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const linking = {\n  prefixes: ['https://mychat.com', 'mychat://'],\n  config: {\n    Chat: 'feed/:sort',\n  },\n  getStateFromPath: (path, options) => {\n    // Return a state object here\n    // You can also reuse the default logic by importing `getStateFromPath` from `@react-navigation/native`\n  },\n  getPathFromState(state, config) {\n    // Return a path string here\n    // You can also reuse the default logic by importing `getPathFromState` from `@react-navigation/native`\n  },\n};\n")),Object(r.b)("h2",{id:"constraints-to-consider-with-nesting-configs"},"Constraints to consider with nesting configs"),Object(r.b)("p",null,"There are some constraints to consider when using nested navigators in the linking config."),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Using ",Object(r.b)("inlineCode",{parentName:"strong"},"initialRouteName")," makes the screen always appear in the state of a navigator.")," It's not possible to pass params to the initial screen through the URL by default, unless the URL explicitly maps to the screen. So make sure that your initial route doesn't take any params or specify ",Object(r.b)("inlineCode",{parentName:"p"},"initialParams"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Having multiple screens of a nested navigator present in the state object is not possible in a single URL.")," you also cannot provide a URL like (for the above configuration) ",Object(r.b)("inlineCode",{parentName:"p"},"/user/home"),", because it would be resolved to ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack->Profile->HomeStack->Home"),". If you want to get rid of the second ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack"),", you can provide an explicit config for the ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen in the first level of config nesting (remember to provide a different path string for each occurrence of a screen in the config):"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const config = {\n  HomeStack: {\n    path: 'stack',\n    initialRouteName: 'Feed',\n    screens: {\n      Profile: 'user',\n    },\n  },\n  Settings: 'settings',\n  Home: 'first',\n};\n")),Object(r.b)("p",{parentName:"li"},"Then ",Object(r.b)("inlineCode",{parentName:"p"},"/user/home")," will resolve to ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack->Profile->Home"),"."),Object(r.b)("p",{parentName:"li"},"You can also make the config not include nested navigator, which will make the URL even longer, but maybe a bit less confusing."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const config = {\n  HomeStack: 'stack',\n  Home: 'home',\n  Profile: 'user',\n  Settings: 'settings',\n};\n")),Object(r.b)("p",{parentName:"li"},"Then ",Object(r.b)("inlineCode",{parentName:"p"},"/stack/user/home")," will resolve to ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack->Profile->Home"),".")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"When nesting navigators, params are only passed to the screen that'll be opened by the URL.")," If you want to have the same params in other screens, you can specify a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/use-linking#getstatefrompath"}),"custom ",Object(r.b)("inlineCode",{parentName:"a"},"getStateFromPath")," function")," and copy those params to the desired route objects."))),Object(r.b)("h2",{id:"playground"},"Playground"),Object(r.b)("p",null,"You can play around with customizing the config and path below, and see how the path is parsed."),Object(r.b)(o.a,{mdxType:"LinkingTester"}),Object(r.b)("h2",{id:"example-app"},"Example App"),Object(r.b)("p",null,"In the example app, you will use the Expo managed workflow. The guide will focus on creating the deep linking configuration and not on creating the components themselves, but you can always check the full implementation in the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/react-navigation/deep-linking-example"}),"github repo"),"."),Object(r.b)("p",null,"First, you need to decide the navigation structure of your app. To keep it simple, the main navigator will be bottom-tabs navigator with two screens. Its first screen will be a simple stack navigator, called ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack"),", with two screens: ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Profile"),", and the second tabs screen will be just a simple one without any nested navigators, called ",Object(r.b)("inlineCode",{parentName:"p"},"Settings"),":"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"BottomTabs\n\u251c\u2500\u2500 Stack (HomeStack)\n\u2502\xa0\xa0 \u251c\u2500\u2500 Home\n\u2502\xa0\xa0 \u2514\u2500\u2500 Profile\n\u2514\u2500\u2500 Settings\n")),Object(r.b)("p",null,"After creating the navigation structure, you can create a config for deep linking, which will contain mappings for each screen to a path segment. For example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const config = {\n  HomeStack: 'stack',\n  Home: 'home',\n  Profile: 'user',\n  Settings: 'settings',\n};\n")),Object(r.b)("p",null,"Then, to get to ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen in ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack"),", the URL would look like ",Object(r.b)("inlineCode",{parentName:"p"},"/stack/home"),", and for ",Object(r.b)("inlineCode",{parentName:"p"},"Settings")," screen, it would be ",Object(r.b)("inlineCode",{parentName:"p"},"/settings")," etc."),Object(r.b)("p",null,"But what if you want to have parameters in the URL, like the user id of the person, whose profile you are visiting in the ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen? Or maybe you would like to define a screen that will be always present in the state for the ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack")," navigator? With properly defined ",Object(r.b)("inlineCode",{parentName:"p"},"config")," it can all be done easily, so let's do this!"),Object(r.b)("h3",{id:"making-the-config-more-flexible"},"Making the config more flexible"),Object(r.b)("p",null,"With the above config, in order to get to ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," or ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen, you need to have ",Object(r.b)("inlineCode",{parentName:"p"},"/stack")," in the URL (",Object(r.b)("inlineCode",{parentName:"p"},"/stack/home")," and ",Object(r.b)("inlineCode",{parentName:"p"},"/stack/user"),"). But it'll be much better if you could go to the ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen with ",Object(r.b)("inlineCode",{parentName:"p"},"/home")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," screen with ",Object(r.b)("inlineCode",{parentName:"p"},"/profile"),"."),Object(r.b)("p",null,"You can achieve the behavior by using nested navigators in your ",Object(r.b)("inlineCode",{parentName:"p"},"config"),". The syntax looks like that:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"config = {\n  HomeStack: {\n    screens: {\n      Home: 'home',\n      Profile: 'user',\n    },\n  },\n  Settings: 'settings',\n};\n")),Object(r.b)("p",null,"As you can see, ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," are now nested in the ",Object(r.b)("inlineCode",{parentName:"p"},"screens")," property of ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack"),". This means that when you pass the ",Object(r.b)("inlineCode",{parentName:"p"},"/home")," URL, it will be resolved to a ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack"),"->",Object(r.b)("inlineCode",{parentName:"p"},"Home")," state object (similarly for ",Object(r.b)("inlineCode",{parentName:"p"},"/user")," it would be ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack"),"->",Object(r.b)("inlineCode",{parentName:"p"},"Profile"),")."),Object(r.b)("p",null,"Here, the ",Object(r.b)("inlineCode",{parentName:"p"},"HomeStack")," property now contains a config object. The config can go as deep as you want, e.g. if ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," was a navigator, you could make it an object with ",Object(r.b)("inlineCode",{parentName:"p"},"screens")," property, and put more screens or navigators inside it, making the URL string much more readable."),Object(r.b)("p",null,"What if you wanted a specific screen to used as the initial screen in the navigator? For example, if you had a URL that would open ",Object(r.b)("inlineCode",{parentName:"p"},"Home")," screen, you would like to be able to navigate to ",Object(r.b)("inlineCode",{parentName:"p"},"Profile")," from it by using navigation's ",Object(r.b)("inlineCode",{parentName:"p"},"navigation.goBack()")," method. It is possible by defining ",Object(r.b)("inlineCode",{parentName:"p"},"initialRouteName")," for a navigator. It would look like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"config = {\n  HomeStack: {\n    initialRouteName: 'Profile',\n    screens: {\n      Home: 'home',\n      Profile: 'user',\n    },\n  },\n  Settings: 'settings',\n};\n")))}b.isMDXComponent=!0},581:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return LinkingTester}));var _home_runner_work_react_navigation_github_io_react_navigation_github_io_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(534),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(518),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_react_navigation_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(584),escape_html__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(596),escape_html__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(escape_html__WEBPACK_IMPORTED_MODULE_5__),react_simple_code_editor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(597),react_simple_code_editor__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_simple_code_editor__WEBPACK_IMPORTED_MODULE_6__),prism_react_renderer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(649),prism_react_renderer_themes_github__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(600),prism_react_renderer_themes_dracula__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(599),_theme_ThemeContext__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(508),_RouteMap__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(598),parse=function parse(value){return eval("(function() { return "+value+"; }())")};function LinkingTester(){var e,t=react__WEBPACK_IMPORTED_MODULE_3__.useContext(_theme_ThemeContext__WEBPACK_IMPORTED_MODULE_10__.a).isDarkTheme?prism_react_renderer_themes_dracula__WEBPACK_IMPORTED_MODULE_9__.a:prism_react_renderer_themes_github__WEBPACK_IMPORTED_MODULE_8__.a,n=react__WEBPACK_IMPORTED_MODULE_3__.useState("{\n  Home: {\n    initialRouteName: 'Feed',\n    screens: {\n      Profile: {\n        path: 'user/:id',\n        parse: {\n          id: id => id.replace(/^@/, ''),\n        },\n      },\n    },\n  },\n  Settings: 'edit',\n}"),a=n[0],i=n[1],r=react__WEBPACK_IMPORTED_MODULE_3__.useState("/user/@vergil/edit"),o=r[0],s=r[1],c=react__WEBPACK_IMPORTED_MODULE_3__.useState((function(){return parse(a)})),l=c[0],p=c[1],b=react__WEBPACK_IMPORTED_MODULE_3__.useState(!1),d=b[0],m=b[1];try{e=Object(_react_navigation_core__WEBPACK_IMPORTED_MODULE_4__.getStateFromPath)(o.replace(/(^\w+:|^)\/\//,""),l)}catch(_){}return react__WEBPACK_IMPORTED_MODULE_3__.createElement(react__WEBPACK_IMPORTED_MODULE_3__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3__.createElement("input",{type:"text",value:o,placeholder:"Type a path, e.g. /user/@vergil/edit",onChange:function(e){return s(e.target.value)},style:Object.assign({},styles.code,{},styles.input)}),react__WEBPACK_IMPORTED_MODULE_3__.createElement(react_simple_code_editor__WEBPACK_IMPORTED_MODULE_6___default.a,{value:a,placeholder:"Type linking config",onValueChange:function(e){i(e);try{var t=parse(e);p(t)}catch(_){}},highlight:function(e){return react__WEBPACK_IMPORTED_MODULE_3__.createElement(prism_react_renderer__WEBPACK_IMPORTED_MODULE_7__.a,Object(_home_runner_work_react_navigation_github_io_react_navigation_github_io_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.a)({},prism_react_renderer__WEBPACK_IMPORTED_MODULE_7__.b,{code:e,theme:t,language:"jsx"}),(function(e){var t=e.tokens,n=e.getLineProps,a=e.getTokenProps;return t.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3__.createElement("div",n({line:e,key:t}),e.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3__.createElement("span",a({token:e,key:t}))})))}))}))},padding:16,style:Object.assign({},styles.code,{},styles.editor)}),react__WEBPACK_IMPORTED_MODULE_3__.createElement("div",{style:styles.preview},react__WEBPACK_IMPORTED_MODULE_3__.createElement("button",{type:"button",style:styles.button,onClick:function(){return m((function(e){return!e}))}},d?"Chart":"JSON"),d?react__WEBPACK_IMPORTED_MODULE_3__.createElement(prism_react_renderer__WEBPACK_IMPORTED_MODULE_7__.a,Object(_home_runner_work_react_navigation_github_io_react_navigation_github_io_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__.a)({},prism_react_renderer__WEBPACK_IMPORTED_MODULE_7__.b,{code:JSON.stringify(e,null,2)||"",theme:t,language:"json"}),(function(e){var t=e.className,n=e.style,a=e.tokens,i=e.getLineProps,r=e.getTokenProps;return react__WEBPACK_IMPORTED_MODULE_3__.createElement("pre",{className:t,style:Object.assign({},n,{},styles.json)},a.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3__.createElement("div",i({line:e,key:t}),e.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_3__.createElement("span",r({token:e,key:t}))})))})))})):e?react__WEBPACK_IMPORTED_MODULE_3__.createElement(_RouteMap__WEBPACK_IMPORTED_MODULE_11__.a,{routes:e.routes}):null))}var styles={code:{display:"block",fontFamily:"var(--ifm-font-family-monospace)",fontSize:"var(--ifm-code-font-size)",borderRadius:"var(--ifm-pre-border-radius)",margin:"var(--ifm-spacing-vertical) 0"},input:{display:"block",width:"100%",padding:"var(--ifm-pre-padding)",backgroundColor:"transparent",color:"inherit",border:"1px solid var(--ifm-contents-border-color)"},editor:{border:"1px solid var(--ifm-contents-border-color)"},preview:{position:"relative",border:"1px solid var(--ifm-contents-border-color)",borderRadius:"var(--ifm-pre-border-radius)",minHeight:70},json:{margin:0,fontFamily:"var(--ifm-font-family-monospace)",fontSize:"var(--ifm-code-font-size)",borderRadius:"var(--ifm-pre-border-radius)",padding:"var(--ifm-pre-padding)",minHeight:70},button:{position:"absolute",right:0,border:"1px solid var(--ifm-contents-border-color)",borderRadius:"0 var(--ifm-pre-border-radius)",borderRight:0,borderTop:0,cursor:"pointer",display:"block",fontSize:12,padding:"4px 8px",color:"inherit",background:"none",MozAppearance:"none",WebkitAppearance:"none"}}},598:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(23),n(17),n(18),n(517),n(505),n(534);var a=n(0);function i(e){var t=e.routes,n=e.root,o=void 0===n||n;return a.createElement("div",{style:Object.assign({},r.container,{},o?{overflowX:"auto",padding:"calc(var(--ifm-pre-padding) / 2)"}:null)},t.map((function(e,t){return a.createElement("div",{key:e.name,style:r.item},a.createElement("div",{style:r.route},a.createElement("div",{style:r.name},e.name,o?null:0===t?a.createElement("div",{style:r.connectLeft}):a.createElement("div",{style:r.connectUpLeft})),e.params?a.createElement("div",{style:r.paramsContainer},a.createElement("table",{style:r.params},a.createElement("tbody",null,Object.entries(e.params).map((function(e){var t=e[0],n=e[1];return a.createElement("tr",{key:t,style:r.row},a.createElement("td",{style:r.key},t),a.createElement("td",{style:r.colon},":"),a.createElement("td",{style:r.value},JSON.stringify(n)))})))),a.createElement("div",{style:r.connectUp})):null),e.state?a.createElement(i,{routes:e.state.routes,root:!1}):null)})))}var r={container:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"row",alignItems:"flex-start"},route:{minWidth:160},name:{backgroundColor:"#3F51B5",color:"white",fontSize:"var(--ifm-code-font-size)",margin:"calc(var(--ifm-pre-padding) / 2)",padding:"calc(var(--ifm-pre-padding) / 2) var(--ifm-pre-padding)",borderRadius:4,position:"relative",textAlign:"center"},paramsContainer:{position:"relative"},params:{backgroundColor:"rgba(3, 169, 244, 0.08)",border:"1px solid #3F51B5",fontFamily:"var(--ifm-font-family-monospace)",fontSize:"var(--ifm-code-font-size)",margin:"var(--ifm-pre-padding) calc(var(--ifm-pre-padding) / 2)",borderRadius:4,padding:3,width:"auto",overflow:"visible"},row:{border:0,background:"none"},key:{color:"#009688",border:0,padding:"4px 6px",textAlign:"right"},value:{color:"#E91E63",padding:"4px 6px",border:0},colon:{color:"inherit",opacity:.3,border:0,padding:0},connectLeft:{position:"absolute",width:16,height:1,backgroundColor:"#3F51B5",right:"100%",top:"50%"},connectUpLeft:{position:"absolute",width:9,height:52,border:"1px solid #3F51B5",borderRadius:"0 0 0 3px",borderRight:0,borderTop:0,right:"100%",bottom:"50%"},connectUp:{position:"absolute",width:1,height:16,backgroundColor:"#3F51B5",right:"50%",bottom:"100%"}}}}]);